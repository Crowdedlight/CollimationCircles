<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:CollimationCircles.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:res="clr-namespace:CollimationCircles.Resources.Strings"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        x:Class="CollimationCircles.Views.SettingsWindow"
        Title="{Binding Title}"
        Width="800"
        Height="400">
  <StackPanel Orientation="Vertical" Margin="16" Spacing="5" HorizontalAlignment="Stretch">
    <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch" Spacing="10">
      <Button Padding="0" Command="{Binding AddCircleCommand}" VerticalAlignment="Center" ToolTip.Tip="{x:Static res:Text.AddNewMark}">
        <Image Source="/Resources/Images/ic_add.png" Width="30"/>
      </Button>
      <Button Padding="0" Command="{Binding ResetListCommand}" VerticalAlignment="Center" ToolTip.Tip="{x:Static res:Text.ResetMarks}">
        <Image Source="/Resources/Images/ic_reset.png" Width="30"/>
      </Button>
      <Button Padding="0" Command="{Binding SaveListCommand}" VerticalAlignment="Center" ToolTip.Tip="{x:Static res:Text.SaveList}">
        <Image Source="/Resources/Images/ic_file_download.png" Width="30"/>
      </Button>
      <Button Padding="0" Command="{Binding LoadListCommand}" VerticalAlignment="Center" ToolTip.Tip="{x:Static res:Text.SaveList}">
        <Image Source="/Resources/Images/ic_file_upload.png" Width="30"/>
      </Button>
      <NumericUpDown Width="150" Increment="0.01"
                  ToolTip.Tip="{x:Static res:Text.Scale}" Value="{Binding Scale}"
                  Minimum="0.0" Maximum="4.0" />
      <CheckBox IsChecked="{Binding ShowLabels}" ToolTip.Tip="{x:Static res:Text.ShowLabels}" />
    </StackPanel>
    <ScrollViewer HorizontalAlignment="Stretch">
      <ItemsRepeater  Items="{Binding Marks}">
        <ItemsRepeater.Layout>
          <StackLayout Orientation="Vertical" />
        </ItemsRepeater.Layout>
        <ItemsRepeater.ItemTemplate>
          <DataTemplate>

            <StackPanel Orientation="Horizontal" Spacing="5">
              <Button
                Width="30" Padding="0"
                Command="{Binding $parent[ItemsRepeater].DataContext.RemoveCircleCommand}" CommandParameter="{Binding .}"
                VerticalAlignment="Center"
                ToolTip.Tip="{x:Static res:Text.RemoveMark}">
                <Image Source="/Resources/Images/ic_remove.png" />
              </Button>

              <TextBox Width="80" Text="{Binding Label}" ToolTip.Tip="{x:Static res:Text.Label}" />

              <CheckBox Name="IsCrossCheckBox" IsChecked="{Binding IsCross, Mode=TwoWay}" ToolTip.Tip="{Binding ToolTip}" />

              <NumericUpDown Width="120"
                ToolTip.Tip="{x:Static res:Text.Radius}" Value="{Binding Radius}"
                Minimum="0" Maximum="2000" />

              <NumericUpDown Width="100"
                ToolTip.Tip="{x:Static res:Text.Thickness}" Value="{Binding Thickness}"
                Minimum="1" Maximum="10"/>

              <ComboBox Width="120"
                ToolTip.Tip="{x:Static res:Text.Color}" SelectedItem="{Binding Color, Mode=TwoWay}" Items="{Binding $parent[ItemsRepeater].DataContext.ColorList}">
                <ComboBox.ItemTemplate>
                  <DataTemplate>
                    <StackPanel Orientation="Horizontal" Spacing="5">
                      <Border BorderBrush="Black" BorderThickness="1" Width="14" Height="14">
                        <TextBlock Background="{Binding .}" Width="12" Height="12" />
                      </Border>
                      <TextBlock Text="{Binding ., Mode=TwoWay}" />
                    </StackPanel>
                  </DataTemplate>
                </ComboBox.ItemTemplate>
              </ComboBox>

              <StackPanel IsVisible="{Binding ElementName=IsCrossCheckBox, Path=IsChecked}" Orientation="Horizontal" Spacing="5">

                <NumericUpDown Width="120"
                  ToolTip.Tip="{x:Static res:Text.Rotation}" Value="{Binding Rotation}"
                  Minimum="0" Maximum="90" />

                <NumericUpDown Width="120"
                  ToolTip.Tip="{x:Static res:Text.Spacing}" Value="{Binding Spacing}"
                  Minimum="1" Maximum="30"/>
              </StackPanel>

            </StackPanel>

          </DataTemplate>
        </ItemsRepeater.ItemTemplate>
      </ItemsRepeater>
    </ScrollViewer>
  </StackPanel>
</Window>
